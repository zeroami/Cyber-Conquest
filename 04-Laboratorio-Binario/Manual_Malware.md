# 游빍 Laboratorio Binario: Protocolos de An치lisis de Malware

> "El malware no es magia, es c칩digo con malas intenciones."

Este m칩dulo establece los procedimientos para diseccionar y entender el software malicioso sin comprometer la seguridad del analista.

## 1. El Zool칩gico de Amenazas
Es crucial clasificar la muestra antes de analizarla:

* **Virus:** C칩digo que infecta archivos ejecutables leg칤timos (.exe) y requiere intervenci칩n humana para propagarse.
* **Gusano (Worm):** Software aut칩nomo que se replica a trav칠s de redes explotando vulnerabilidades, sin necesidad de usuario.
* **Troyano:** Programa aparentemente 칰til que oculta una carga maliciosa (backdoor) para dar acceso remoto al atacante.
* **Ransomware:** Cifra los datos del usuario usando criptograf칤a robusta y exige un pago por la clave de descifrado.

## 2. Entorno de An치lisis (The Sandbox)
**REGLA DE ORO:** Jam치s ejecutes malware en tu sistema operativo principal (Host).

### Requisitos del Laboratorio Seguro:
1.  **Aislamiento:** Usar M치quinas Virtuales (VirtualBox/VMware).
2.  **Red:** Configurar la red en modo "Host-Only" para simular Internet sin dejar salir el tr치fico real.
3.  **Snapshots:** Crear un punto de restauraci칩n antes de infectar la m치quina para poder volver al estado limpio en segundos.

## 3. Metodolog칤a de An치lisis

### A. An치lisis Est치tico (Disecci칩n en fr칤o)
Examinar el archivo sin ejecutarlo. Buscamos huellas digitales.
* **Hashing:** Calcular la firma 칰nica (MD5/SHA256) para identificar la muestra en bases de datos como VirusTotal.
* **Strings:** Extraer cadenas de texto ASCII/Unicode. A menudo revelan IPs de servidores de control (C2), nombres de archivos o mensajes de error.
* **PE Headers:** Analizar las cabeceras del ejecutable para ver cu치ndo fue compilado y qu칠 librer칤as (DLLs) importa.

### B. An치lisis Din치mico (Comportamiento)
Ejecutar el malware en un entorno controlado y observar:
* **Cambios en el Sistema de Archivos:** 쮺rea nuevos archivos ocultos?
* **Persistencia:** 쯉e a침ade al Registro de Windows (Run Keys) para iniciarse con el sistema?
* **Conexiones de Red:** 쯀ntenta "llamar a casa" (DNS requests, HTTP)?

## 4. Herramienta Pr치ctica: Detector de Firmas (Python)
Los antivirus b치sicos funcionan comparando el "Hash" del archivo con una lista negra. Este script simula ese motor:

```python
import hashlib
import os

def calcular_hash(ruta_archivo):
    """Calcula el hash SHA-256 de un archivo para identificarlo."""
    sha256_hash = hashlib.sha256()
    try:
        with open(ruta_archivo, "rb") as f:
            # Leemos el archivo en bloques de 4K
            for byte_block in iter(lambda: f.read(4096), b""):
                sha256_hash.update(byte_block)
        return sha256_hash.hexdigest()
    except FileNotFoundError:
        return "Error: Archivo no encontrado."

# Ejemplo de uso:
# firma = calcular_hash("posible_virus.exe")
# print(f"Firma del archivo: {firma}")
